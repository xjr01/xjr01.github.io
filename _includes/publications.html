{% include base_path %}

<!-- New style rendering if publication categories are defined -->

{% if post.header.teaser %}
  {% capture teaser %}{{ post.header.teaser }}{% endcapture %}
{% else %}
  {% assign teaser = site.teaser %}
{% endif %}

{% if post.id %}
  {% assign title = post.title | markdownify | remove: "<p>" | remove: "</p>" %}
{% else %}
  {% assign title = post.title %}
{% endif %}

<div class="papers-container">
  {% for post in site.publications reversed %}
    <div class="paper-item">
      <div class="paper-image-container">
        <img src="{{ post.image | prepend: "/images/publications/" | prepend: base_path }}" alt="GaussianFluids" class="paper-image">
      </div>
      <div class="paper-content">
        <h3 class="paper-title">
          <a href="{{ post.projecturl }}">{{ post.title }}</a>
        </h3>
        <p class="paper-authors">{{ post.authors }}</p>
        <p class="paper-venue"><em>{{ post.venue }}</em></p>
        <div class="paper-links">
          {% if post.paperpath %}
            <a href="{{ post.paperpath | prepend: base_path }}" class="paper-link">PDF</a>
          {% endif %}
          {% if post.projecturl %}
            <a href="{{ post.projecturl }}" class="paper-link">Project Page</a>
          {% endif %}
          {% if post.codeurl %}
            <a href="{{ post.codeurl }}" class="paper-link">Code</a>
          {% endif %}
        </div>
      </div>
    </div>
  {% endfor %}
</div>

<style>
.papers-container {
  /* margin: 2rem 0; */
  width: 100%;
  max-width: none;
}

.paper-item {
  display: flex;
  gap: 20px;
  margin-bottom: 30px;
  padding: 15px;
  background: #f9f9f9;
  border-radius: 8px;
}

.paper-image-container {
  flex: 0 0 250px;
  display: flex;
  align-items: center;
}

.paper-image {
  width: 100%;
  height: auto;
  object-fit: contain;
  border-radius: 0px;
}

.paper-content {
  flex: 1;
  font-size: 0.8rem;
  line-height: 0.7rem;
}

.paper-title {
  margin-top: 0.5rem;
  margin-bottom: 1.0rem;
}

.paper-title a {
  color: #2a5885;
  text-decoration: none;
  font-size: 1.0rem;
  font-weight: 600;
  transition: color 0.2s;
}

.paper-title a:hover {
  color: #1a365d;
  text-decoration: underline;
}

.paper-authors {
  color: #333;
}

.paper-venue {
  color: #555;
}

.paper-links {
  margin-top: 0.8rem;
  display: flex;
  gap: 10px;
}

.paper-links a {
  text-decoration: none;
}

.paper-link {
  display: inline-block;
  padding: 0.2rem 0.4rem;
  background: #e0e0e0;
  color: #333;
  text-decoration: none;
  border-radius: 0px;
  font-size: 0.6rem;
  transition: background 0.2s;
}

.paper-link:hover {
  background: #d0d0d0;
}

@media (max-width: 768px) {
  .paper-item {
    flex-direction: column;
  }
  
  .paper-image {
    width: 100%;
    max-height: 200px;
  }
}
</style>
